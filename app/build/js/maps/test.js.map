{"version":3,"sources":["test.coffee"],"names":[],"mappings":"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","file":"test.js","sourceRoot":"/source/","sourcesContent":["app = angular.module \"testApp\", []\n\n###\n# fix https://github.com/angular/angular.js/issues/9269\n###\napp.directive \"rangeParser\", () ->\n  return {\n    restrict: \"A\"\n    require: \"ngModel\"\n    link: (scope, element, attr, ctrl) ->\n      return unless ctrl?\n      ctrl.$parsers.push( (value) ->\n        val = Number(value)\n        val = null if val != val\n        return val\n      )\n  }\n\n# TODO show float precision (toFixed or something else)\n# TODO use on blur\napp.directive \"commaDetect\", ($log) ->\n  return {\n    restrict: \"A\"\n    require: \"ngModel\"\n    link: (scope, element, attr, ctrl) ->\n      return unless ctrl?\n      oldV = null\n\n      check = (value) ->\n        return unless value?\n        return if parseInt(value) > 100\n        return if value.match(/^\\-/)\n        if value.match(/\\.$/)\n          oldV = parseInt(value)\n        else\n          oldV = null\n\n        tVal = value.replace(/,/g,\".\")\n\n        if tVal != value\n          ctrl.$setViewValue tVal\n          ctrl.$render()\n\n        if oldV?\n          value = oldV\n        else\n          value = tVal\n\n        value\n\n      ctrl.$parsers.push check\n  }\n\n# MainCtrl\napp.controller \"MainCtrl\", ($scope, $window) ->\n  $scope.model = []\n  $scope.diff = null\n  $window.model = $scope.model\n\n  sumCompute = (items) ->\n    sum = _.reduce( items,\n                    (memo, item)->\n                      return memo+item.percent\n                    , 0\n                  )\n    sum\n\n\n  watchIniter = (item) ->\n    $scope.$watch(\n      () ->\n        item\n    ,\n      (newV,oldV) ->\n        console.log \"init\"\n        console.log \"nV\", newV\n        console.log \"oV\", oldV\n    ,\n      true\n    )\n\n  findDelta = (grt, lss) ->\n    return grt - lss\n\n  modItem = (item) ->\n    item[\"getPercent\"] = ->\n      return @percent\n    item[\"incPercent\"] = (points)->\n      return @percent+points\n    item[\"decPercent\"] = (points)->\n      return @percent-points\n    item\n\n  data =\n    items: [\n      name: \"item1\"\n      percent: 0\n    ,\n      name: \"item2\"\n      percent: 0\n    ,\n      name: \"item3\"\n      percent: 0\n    ]\n\n  zeroCounter = 0\n  zeroCompute = (item) ->\n    zeroCounter = 1 if item.percent != 0\n    modItem(item)\n    return item\n\n  $scope.model.push(zeroCompute i) for i in data.items\n\n  $scope.model[0].percent = 100 if zeroCounter == 0\n\n  for item in $scope.model\n    watchIniter(item)\n\n  $scope.dec = (item) ->\n    item.decPercent(1)\n\n  $scope.inc = (item) ->\n    item.incPercent(1)\n\n  return\n"]}