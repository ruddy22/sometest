{"version":3,"sources":["controllers.coffee"],"names":[],"mappings":"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","file":"controllers.js","sourceRoot":"/source/","sourcesContent":["app.controller \"MainCtrl\", ($scope, $window, defaultSum, Data) ->\n  $scope.model = []\n  $window.model = $scope.model\n  $scope.currentData = []\n  $scope.defSum = defaultSum\n\n  sumCompute = (items) ->\n    sum = _.reduce(\n      items\n    ,\n      (memo, item)->\n        memo+item.percent\n    ,\n      0\n    )\n    sum\n\n  modItem = (item) ->\n    item[\"blocked\"] = false\n    item\n\n  resolveProportion = (percent, sum) ->\n    return Math.round(percent*defaultSum/sum)\n\n  normalizeData = (data, sum) ->\n    _.each(\n      data\n    ,\n      (el) ->\n        el.percent = resolveProportion(el.percent, sum)\n    )\n\n  loadData = (dataType = Data.dataNull) ->\n    $scope.currentData = angular.copy dataType.items\n    $scope.model = []\n    $scope.model.push(modItem i) for i in dataType.items\n\n  analiseData = ->\n    return if _.isEmpty $scope.model\n    length = $scope.model.length\n    sum = sumCompute($scope.model)\n    switch\n      when sum == 0 or length == 1    then $scope.model[0].percent = 100\n      when 0 < sum < 100 or sum > 100 then normalizeData($scope.model, sum)\n\n  $scope.init = (dataType)->\n    loadData dataType\n    do analiseData\n\n  $scope.setDataNull = ->\n    $scope.init Data.dataNull\n  $scope.setDataNorm = ->\n    $scope.init Data.dataNorm\n  $scope.setDataBig = ->\n    $scope.init Data.dataBig\n  $scope.setDataSmall = ->\n    $scope.init Data.dataSmall\n  $scope.setDataOnce = ->\n    $scope.init Data.dataOnce\n  $scope.setDataTwice = ->\n    $scope.init Data.dataTwice\n\n  return\n"]}